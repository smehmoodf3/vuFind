<script type="text/javascript" src="/site/jquery-1.8.3.min.js"></script>


<script  type="text/javascript">

<%= getAttribute("item","15","storeurl") %>

(function($){

$(document).ready(function(){


var storeIdElements=$("[name='n']");
var storeId=1;
var suiteletUrl;
var storeDomain=document.location.origin;
var itemInternalId="<%=getCurrentAttribute('item','internalid')%>";

if(!!storeIdElements && storeIdElements.length>0)
{

    storeId=storeIdElements[0].value;

}

suiteletUrl="/app/site/hosting/scriptlet.nl?script=customscript_vufind_recommendations_suit&deploy=customdeploy_vufind_recommendations_suit"+"&storeid="+storeId+"&storedomain="+storeDomain+"&storeitemid="+itemInternalId;

$.ajax({ url: suiteletUrl,
         dataType: "jsonp",
         jsonpCallback: 'vuFindRecommendations'
       });
});



})(jQuery);



function vuFindRecommendations(data)
{

(function($){


 var recommendations;
 var htmlData='';
 var itemURL;
 var itemImg;
 var itemDesc;
 var itemInternalId;
 var temp;
    if(!!data)
    {
        recommendations=data.recommendations;

      if(!!recommendations &&recommendations.length>0)
      {

             if(recommendations.length){


                    for(var r=0;r<recommendations.length;r++)
                    {
                             htmlData='';
                             itemURL=recommendations[r].itemurl;
                             itemImg=recommendations[r].imageurl;
                             itemDesc=recommendations[r].storedisplayname;
                             itemDetailDesc=recommendations[r].storedescription;


                             htmlData=htmlData+'<a href="'+itemURL+'"><img src="'+itemImg+'"></a>';
                             htmlData=htmlData+'<br/>  '+itemDesc;
                             htmlData=htmlData+'<br/>  '+itemDetailDesc;


                        $('<li/>', {html: htmlData}).appendTo('ul.recommendationsList');

                    }
              }
      }

    }



  $('.recommendationsList').bxSlider({
  minSlides: 3,
  maxSlides: 4,
  slideWidth: 220
// ,slideMargin: 10
// ,auto:true
 //,controls:true	//Left Right Button
 //,pager:true	// Slide Selector .. dots to select slided
 //,autoStart:false
});



})(jQuery);

//alert(JSON.stringify(data));



}

</script>